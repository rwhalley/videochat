"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[411],{9112:(ve,Y,n)=>{n.d(Y,{M:()=>p});var e=n(9067),f=n(8081),P=n(5581);const p=(...u)=>(0,e._U)((0,f.Dv)(P._8.appConfig,...u))},8961:(ve,Y,n)=>{n.d(Y,{Z:()=>P});var e=n(8081),f=n(9067);const P=p=>{const u=p===e.Mv.audio,h=u?e.Hx:e.k0,O=(0,f._U)(h.selectedItem),$=(0,f._U)(h.selection),M=(0,f._U)(h.list),q=(0,f.cw)(),K=u?q.audioPlaylist:q.videoPlaylist;return{active:O,hasNext:$.hasNext,hasPrevious:$.hasPrevious,actions:K,list:M}}},9121:(ve,Y,n)=>{n.d(Y,{VK:()=>W,nN:()=>L,l0:()=>H.l});var e=n(8160),f=n(5836),P=n(9067),p=n(8081),u=n(108),h=n.n(u),O=Object.defineProperty,$=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(T,v,m)=>v in T?O(T,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[v]=m,D=(T,v)=>{for(var m in v||(v={}))M.call(v,m)&&K(T,m,v[m]);if($)for(var m of $(v))q.call(v,m)&&K(T,m,v[m]);return T},S=(T,v,m)=>(K(T,typeof v!="symbol"?v+"":v,m),m);const x=T=>JSON.stringify(T,(v,m)=>m===void 0?null:m);class te{constructor(){S(this,"init",(v="")=>{this.initialized||(this.pusher=new(h())("",{cluster:"ap2",authEndpoint:""}),this.channel=this.pusher.subscribe(`private-${v}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),S(this,"storeEvent",(v,m)=>{this.lastMessage[v]=D({eventName:v},m)}),S(this,"getStoredEvent",v=>this.lastMessage[v]),S(this,"broadcastEvent",(v,m={})=>{var g;this.storeEvent(v,m),(g=this.channel)==null||g.trigger(`client-${v}`,x(D({eventName:v},m)))}),S(this,"subscribe",(v,m)=>{var g,E;return(g=this.channel)==null||g.bind(`client-${v}`,R=>this.storeEvent(v,R)),(E=this.channel)==null||E.bind(`client-${v}`,m),()=>{var R;(R=this.channel)==null||R.unbind(`client-${v}`,m)}}),S(this,"resendLastEvents",()=>{var v;for(const m in this.lastMessage)this.lastMessage[m]&&((v=this.channel)==null||v.trigger(`client-${m}`,this.lastMessage[m]))}),this.initialized=!1,this.lastMessage={}}}const N=new te,B={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"};var H=n(802);const le=()=>{const{amIWhiteboardOwner:T}=(0,H.l)();return{shouldRequestState:(0,P._U)((0,p._u)(850)),amIWhiteboardOwner:T}};function j(T){const[v,m]=(0,e.useState)(null),[g,E]=(0,e.useState)(!1),{amIWhiteboardOwner:R,shouldRequestState:J}=le(),se=(0,e.useRef)(new Map),G=(0,e.useRef)(new Map),ee=(0,e.useCallback)(()=>({shapes:se.current?Object.fromEntries(se.current):{},bindings:G.current?Object.fromEntries(G.current):{}}),[]),ae=(0,e.useCallback)(()=>{R&&g&&N.broadcastEvent(B.CURRENT_STATE,ee())},[R,g,ee]),ie=(0,e.useCallback)(({shapes:ne,bindings:_e,merge:ge=!0})=>{if(!!(ne&&_e))if(ge){const he=se.current,Se=G.current;if(!(he&&Se))return;Object.entries(ne).forEach(([Ce,fe])=>{fe?he.set(fe.id,fe):he.delete(Ce)}),Object.entries(_e).forEach(([Ce,fe])=>{fe?Se.set(fe.id,fe):Se.delete(Ce)})}else se.current=new Map(Object.entries(ne)),G.current=new Map(Object.entries(_e))},[]),me=(0,e.useCallback)(ne=>{v?.replacePageContent(ne.shapes,ne.bindings,{})},[v]),oe=(0,e.useCallback)(ne=>{if(!ne)return;const{shapes:_e,bindings:ge,eventName:he}=ne;ie({shapes:_e,bindings:ge,merge:he===B.STATE_CHANGE}),me(ee())},[me,ee,ie]),re=(0,e.useCallback)(()=>{!g||(R?(oe(N.getStoredEvent(B.CURRENT_STATE)),ae()):J&&N.broadcastEvent(B.REQUEST_STATE))},[g,R,J,oe,ae]),Te=(0,e.useCallback)(ne=>{ne.loadRoom(T),ne.pause(),m(ne)},[T]),ye=(0,e.useCallback)((ne,_e,ge,he)=>{ie({shapes:_e,bindings:ge}),N.broadcastEvent(B.STATE_CHANGE,{shapes:_e,bindings:ge}),me(ee())},[ie,me,ee]);return(0,e.useEffect)(()=>{if(!v)return;const ne=[];let _e=!0;function ge(){_e&&(ne.push(N.subscribe(B.STATE_CHANGE,oe)),ne.push(N.subscribe(B.CURRENT_STATE,oe)),ne.push(N.subscribe(B.REQUEST_STATE,ae)),E(!0))}return N.init(T),ge(),re(),()=>{_e=!1,ne.forEach(he=>he())}},[v,T,re,ae,oe]),(0,e.useEffect)(()=>()=>{g&&!J&&(console.log("Whiteboard unmount storing",ee()),N.storeEvent(B.CURRENT_STATE,ee()))},[g,J,ee]),{onMount:Te,onChangePage:ye}}var Z=Object.defineProperty,I=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,b=(T,v,m)=>v in T?Z(T,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[v]=m,k=(T,v)=>{for(var m in v||(v={}))A.call(v,m)&&b(T,m,v[m]);if(I)for(var m of I(v))C.call(v,m)&&b(T,m,v[m]);return T};const L=e.memo(({roomId:T})=>{const v=j(T);return e.createElement(f.Dr,k({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},v))});var w=n(9168),F=n(455),y=n(7777),V=n(8160);const W=()=>{const{whiteboardEnabled:T,whiteboardOwner:v,amIWhiteboardOwner:m,toggleWhiteboard:g}=(0,H.l)();return T?V.createElement(F.u,{title:`${v?m?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},V.createElement(y.Z,{onClick:g,active:!v,disabled:v&&!m,"data-testid":"white_board_btn"},V.createElement(w.Z,null))):null}},9990:(ve,Y,n)=>{n.d(Y,{Nc:()=>Z,iS:()=>j});var e=n(8160),f=n(8081),P=n(9067),p=n(6905),u=n(4817),h=n(8338),O=n(4053),$=n(4334),M=n(7506),q=n(8651),K=n(6939),D=n(8485),S=n(8721),x=n(5861),te=n(8961);const N=({type:I,duration:A})=>{const C=I===f.Mv.audio?f.Hx:f.k0,b=(0,P._U)(C.progress),k=(0,P.cw)(),L=I===f.Mv.audio?k.audioPlaylist:k.videoPlaylist;return A?e.createElement(q.i,{step:1,value:[b],onValueChange:w=>{L.seekTo(w[0]*.01*A)}}):null},B=({type:I,onToggle:A})=>{var C,b;const L=I===f.Mv.audio?f.Hx:f.k0,w=(0,P._U)(L.selectedItem);return w?e.createElement(K.x,{css:{mt:"$8"}},e.createElement(D.k,{justify:"between",css:{w:"100%"}},e.createElement(K.x,null,e.createElement(S.x,{variant:"md"},w.name),((C=w.metadata)==null?void 0:C.description)&&e.createElement(S.x,{variant:"xs"},(b=w.metadata)==null?void 0:b.description)),e.createElement(x.h,{onClick:A,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(p.Z,null)))):null},H=({type:I,css:A={}})=>{const{active:C,hasNext:b,hasPrevious:k,actions:L}=(0,te.Z)(I);return C?e.createElement(D.k,{justify:"center",css:A},e.createElement(x.h,{disabled:!k,onClick:()=>{L.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(u.Z,null)),e.createElement(x.h,{onClick:()=>{C.playing?L.pause():L.play(C.id)},"data-testid":"playlist_play_pause_btn"},C.playing?e.createElement(h.Z,{width:32,height:32}):e.createElement(O.Z,{width:32,height:32})),e.createElement(x.h,{disabled:!b,onClick:()=>{L.playNext()},"data-testid":"playlist_next_btn"},e.createElement($.Z,null))):null},le=()=>{const I=(0,P.cw)(),A=(0,P._U)(f.k0.volume),C=(0,P._U)(f.k0.selectedItem),b=(0,P._U)(f.Oq),k=(0,P._U)((0,f.n2)(b?.id)),L=(0,P._U)((0,f.BF)(k?.id)),w=C?A:L;return e.createElement(D.k,{align:"center",css:{color:"$white"}},e.createElement(M.Z,null),e.createElement(q.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(w)],onValueChange:F=>{const y=F[0];C?I.videoPlaylist.setVolume(y):k&&I.setVolume(y,k.id)},thumbStyles:{w:"$6",h:"$6"}}))},j=({onToggle:I})=>{const{active:A}=(0,te.Z)(f.Mv.audio);return A?e.createElement(K.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(H,{type:f.Mv.audio}),e.createElement(N,{type:f.Mv.audio,duration:A.duration}),e.createElement(B,{type:f.Mv.audio,onToggle:I})):null},Z=({children:I})=>{const{active:A}=(0,te.Z)(f.Mv.video);return e.createElement(K.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},A&&e.createElement(N,{type:f.Mv.video,duration:A.duration}),e.createElement(D.k,{align:"center",justify:"between"},e.createElement(le,null),A&&e.createElement(H,{css:{flex:"1 1 0"}}),I))}},9477:(ve,Y,n)=>{n.d(Y,{Z:()=>le});var e=n(8160),f=n(8379),P=n(8523),p=n.n(P),u=n(9067),h=n(8081),O=n(6532),$=n(7854),M=n(1280),q=n(4299),K=n(3074),D=n(3844),S=n(6567),x=n(6773),te=n(5581);const N={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},B=({peerId:j,width:Z="100%",height:I="100%"})=>{const A=(0,u._U)((0,h.K6)(j)),C=(0,u._U)((0,h.Nm)(j)),b=(0,x.L3)(te.JZ.isAudioOnly),k=(0,x.tQ)(),[L,w]=(0,e.useState)(!1),F=(0,x.L3)(te.JZ.showStatsOnTiles),y=(0,D.O)({peerName:C.name,isLocal:!1,track:A}),V=(0,e.useRef)(null),[W,T]=(0,e.useState)(!1),v=(0,f.Z)(V,W,{onClose:()=>T(!1)}),m=p().isEnabled,g=(0,u._U)((0,h.Qq)(C?.id));return e.createElement(M.i.Root,{css:{width:Z,height:I},"data-testid":"screenshare_tile"},C?e.createElement(M.i.Container,{transparentBg:!0,ref:V,css:{flexDirection:"column"},onMouseEnter:()=>w(!0),onMouseLeave:()=>{w(!1)}},F?e.createElement(q.q8,{audioTrackID:g?.id,videoTrackID:A?.id}):null,m&&!k?e.createElement(M.i.FullScreenButton,{onClick:()=>T(!W)},v?e.createElement(O.Z,null):e.createElement($.Z,null)):null,A?e.createElement(K.n,{screenShare:!0,mirror:C.isLocal&&A?.source==="regular",attach:!b,trackId:A.id,threshold:.05}):null,e.createElement(M.i.Info,{css:N},y),L&&!k&&!C?.isLocal?e.createElement(S.Z,{isScreenshare:!0,peerID:C?.id,audioTrackID:g?.id,videoTrackID:A?.id}):null):null)},le=e.memo(B)},6567:(ve,Y,n)=>{n.d(Y,{Z:()=>j});var e=n(8160),f=n(9067),P=n(8081),p=n(4866),u=n(4896),h=n(4328),O=n(8111),$=n(7923),M=n(6548),q=n(8981),K=n(7506),D=n(9540),S=n(4685),x=n(8414),te=n(8485),N=n(8651),B=n(5581),H=(Z,I,A)=>new Promise((C,b)=>{var k=F=>{try{w(A.next(F))}catch(y){b(y)}},L=F=>{try{w(A.throw(F))}catch(y){b(y)}},w=F=>F.done?C(F.value):Promise.resolve(F.value).then(k,L);w((A=A.apply(Z,I)).next())});const j=({audioTrackID:Z,videoTrackID:I,peerID:A,isScreenshare:C=!1})=>{const b=(0,f.cw)(),{removeOthers:k}=(0,f._U)(P.AI),{isAudioEnabled:L,isVideoEnabled:w,setVolume:F,toggleAudio:y,toggleVideo:V,volume:W}=(0,p.T)(Z,I),{sendEvent:T}=(0,u.j)({type:B.fU});return k||y||V||F?e.createElement(x.R.Root,null,e.createElement(x.R.Trigger,{"data-testid":"participant_menu_btn"},e.createElement(h.Z,null)),e.createElement(x.R.Content,{side:"top",align:"end",sideOffset:8},V?e.createElement(x.R.ItemButton,{onClick:V,"data-testid":w?"mute_video_participant_btn":"unmute_video_participant_btn"},w?e.createElement(O.Z,null):e.createElement($.Z,null),e.createElement("span",null,`${w?"Mute":"Request Unmute"}`)):null,y?e.createElement(x.R.ItemButton,{onClick:y,"data-testid":w?"mute_audio_participant_btn":"unmute_audio_participant_btn"},L?e.createElement(M.Z,null):e.createElement(q.Z,null),e.createElement("span",null,`${L?"Mute":"Request Unmute"}`)):null,Z?e.createElement(x.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(te.k,{align:"center",gap:1},e.createElement(K.Z,null)," ",e.createElement("span",null,"Volume (",W,")")),e.createElement(N.i,{css:{my:"0.5rem"},step:5,value:[W],onValueChange:v=>F(v[0])})):null,k?e.createElement(x.R.RemoveItem,{onClick:()=>H(void 0,null,function*(){try{yield b.removePeer(A,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(D.Z,null),e.createElement("span",null,"Remove Participant")):null,k&&C?e.createElement(x.R.RemoveItem,{onClick:()=>T({})},e.createElement(S.Z,null),e.createElement("span",null,"Stop Screenshare")):null)):null}},8051:(ve,Y,n)=>{n.d(Y,{Z:()=>le});var e=n(8160),f=n(5683),P=n(871),p=n(9314),u=n(8613),h=n(8534),O=n(4718),$=n(3385),M=n(4674);const q=({page:j,setPage:Z,numPages:I})=>{const A=j===0,C=j===I-1,b=()=>{Z(Math.min(j+1,I-1))},k=()=>{Z(Math.max(j-1,0))};return e.createElement(M.I.Root,null,e.createElement(M.I.Chevron,{disabled:A,onClick:k},e.createElement(O.Z,{width:16,height:16,style:{cursor:A?"not-allowed":"pointer"}})),e.createElement(M.I.Dots,null,[...Array(I)].map((L,w)=>e.createElement(M.I.Dot,{key:w,active:j===w,onClick:()=>Z(w)}))),e.createElement(M.I.Chevron,{disabled:C,onClick:b},e.createElement($.Z,{width:16,height:16,style:{cursor:C?"not-allowed":"pointer"}})))};var K=n(9477),D=n(8329),S=n(9112),x=n(6773),te=n(9478);const N=({maxTileCount:j,peers:Z,maxColCount:I,maxRowCount:A,includeScreenShareForPeer:C})=>{const{aspectRatio:b}=(0,p.Fg)(),k=(0,S.M)("headlessConfig","tileOffset"),L=(0,x.tQ)(),{ref:w,pagesWithTiles:F}=(0,P.i)({peers:Z,maxTileCount:j,maxColCount:I,maxRowCount:A,includeScreenShareForPeer:C,aspectRatio:b,offsetY:H({isHeadless:L,tileOffset:k})}),[y,V]=(0,e.useState)(0);(0,e.useEffect)(()=>{y>=F.length&&V(0)},[F.length,y]);const W=te.T.freezeVideoList();return e.createElement(u.d.Root,{ref:w},e.createElement(u.d.Container,null,F&&F.length>0?F.map((T,v)=>e.createElement(f.f,{freeze:W&&y!==v,key:v},e.createElement(u.d.View,{css:{left:(0,h.I)(v,y),transition:"left 0.3s ease-in-out"}},T.map((m,g)=>{var E,R,J,se;return((E=m.track)==null?void 0:E.source)==="screen"?e.createElement(K.Z,{key:m.track.id,width:m.width,height:m.height,peerId:m.peer.id}):e.createElement(D.Z,{key:((R=m.track)==null?void 0:R.id)||m.peer.id,width:m.width,height:m.height,peerId:(J=m.peer)==null?void 0:J.id,trackId:(se=m.track)==null?void 0:se.id})})))):null),!L&&F.length>1?e.createElement(q,{page:y,setPage:V,numPages:F.length}):null)},B=e.memo(N),H=({offset:j,isHeadless:Z})=>!Z||typeof j!="number"?32:j,le=B},8329:(ve,Y,n)=>{n.d(Y,{Z:()=>C});var e=n(8160),f=n(8081),P=n(9067),p=n(8981),u=n(3712),h=n(4593),O=n(5470),$=n(1280),M=n(4299),q=n(3074),K=n(1959),D=n(2173),S=n(3844),x=n(6567),te=n(9112),N=n(6773),B=n(5581);const H=({peerId:b,trackId:k,width:L,height:w})=>{const F=k?(0,f.GP)(k):(0,f.t$)(b),y=(0,P._U)(F),V=(0,P._U)((0,f.I_)(b)),W=(0,P._U)((0,f.L6)(b)),T=(0,P._U)(f.I3),v=(0,N.L3)(B.JZ.isAudioOnly),m=(0,N.L3)(B.JZ.mirrorLocalVideo),g=(0,N.L3)(B.JZ.showStatsOnTiles),E=(0,N.tQ)(),R=!(0,P._U)((0,f.xn)(b)),J=!y?.enabled,[se,G]=(0,e.useState)(!1),ee=(0,O.W)(W?.id),ae=y?.degraded,ie=T===b,me=(0,S.O)({peerName:V,track:y,isLocal:ie}),oe=(0,e.useCallback)(ye=>{G(ye.type==="mouseenter")},[]),re=(0,te.M)("headlessConfig"),Te=E&&re?.hideTileName;return e.createElement($.i.Root,{css:{width:L,height:w,padding:A({isHeadless:E,offset:re?.tileOffset})},"data-testid":`participant_tile_${V}`},V!==void 0?e.createElement($.i.Container,{onMouseEnter:oe,onMouseLeave:oe,ref:E&&re?.hideAudioLevel?void 0:ee},e.createElement(D.Z,{hideLabel:Te,name:me,isTile:!0,peerId:b,width:L}),g?e.createElement(M.q8,{audioTrackID:W?.id,videoTrackID:y?.id,peerID:b}):null,y?e.createElement(q.n,{trackId:y?.id,attach:ie?void 0:!v,mirror:m&&b===T&&y?.source==="regular"&&y?.facingMode!=="environment",degraded:ae,"data-testid":"participant_video_tile"}):null,e.createElement($.i.AvatarContainer,null,J||ae||!ie&&v?e.createElement(K.q,{name:V||"","data-testid":"participant_avatar_icon"}):null),I({hideTileAudioMute:re?.hideTileAudioMute,isHeadless:E,isAudioMuted:R})?e.createElement($.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon"},e.createElement(p.Z,null)):null,se&&!E&&!ie?e.createElement(x.Z,{peerID:b,audioTrackID:W?.id,videoTrackID:y?.id}):null,e.createElement(j,{peerId:b})):null)},le={top:"$4",left:"$4"},j=({peerId:b})=>{const k=(0,P._U)((0,f.cH)(b)),L=k?.isHandRaised||!1,w=k?.isBRBOn||!1;return e.createElement(e.Fragment,null,L?e.createElement($.i.AttributeBox,{css:le,"data-testid":"raiseHand_icon_onTile"},e.createElement(u.Z,{width:40,height:40})):null,w?e.createElement($.i.AttributeBox,{css:le,"data-testid":"brb_icon_onTile"},e.createElement(h.Z,{width:40,height:40})):null)},Z=e.memo(H),I=({hideTileAudioMute:b,isHeadless:k,isAudioMuted:L})=>k?L&&!b:L,A=({isHeadless:b,offset:k})=>{if(!(!b||typeof k!="number"))return k===0?0:void 0},C=Z},6197:(ve,Y,n)=>{n.r(Y),n.d(Y,{default:()=>Ht});var e=n(8160),f=n(5396),P=n(3738),p=n(9067),u=n(8081),h=n(8485),O=n(6939),$=n(5374),M=n(9660),q=n(6395),K=n(5349),D=n(6773),S=n(5581),x=n(8160);const te=({showStats:a})=>{const t=(0,p._U)(u.BK);return x.createElement(h.k,{css:{size:"100%","@lg":{flexDirection:"column"}}},x.createElement(N,null),x.createElement(K.O,{peers:t,showStatsOnTiles:a}))},N=()=>{const{amIScreenSharing:a,toggleScreenShare:t}=(0,M.N)(q.m),[s,i]=(0,D.$h)(S._8.embedConfig),[c,r]=(0,e.useState)(!1),o=(0,e.useRef)(!1),_=s.url,l=(0,e.useRef)(),d=(0,e.useCallback)(()=>{_&&i({url:""})},[_,i]);return(0,e.useEffect)(()=>{s.shareScreen&&!a&&!c&&!o.current&&(o.current=!0,t({forceCurrentTab:!0,cropElement:l.current}).then(()=>{r(!0)}).catch(d).finally(()=>{o.current=!1}))},[]),(0,e.useEffect)(()=>(c&&!a&&d(),()=>{c&&a&&t()}),[c,a,d,t]),x.createElement(O.x,{ref:l,css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},x.createElement("iframe",{src:_,title:_,style:{width:"100%",height:"100%",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture fullscreen",referrerPolicy:"no-referrer"}))},B=te,H=a=>(0,p._U)((0,u.Dv)(S._8.appLayout,a)),le=()=>{const a=H("center")||[],t=H("sidepane")||[],s=(0,D.L3)(S.JZ.maxTileCount),i=(0,p._U)(u.BK),c=(0,p._U)(u.I3),r=i.filter(l=>a.includes(l.roleName)),o=i.filter(l=>t.includes(l.roleName));let _=r.length>0&&o.length>0;if(r.length===0){const l=i.length===1&&i[0].id===c,d=o.length===0;_=l||d}return e.createElement(h.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},e.createElement(K.m,{peers:_?r:i,maxTileCount:s,allowRemoteMute:!1,hideSidePane:!_,totalPeers:i.length}),_&&e.createElement(K.O,{peers:o,totalPeers:i.length}))};var j=n(535),Z=n(2482),I=n(9121),A=n(9112),C=n(2197),b=n(759);const k=e.lazy(()=>n.e(421).then(n.bind(n,9421))),L=e.lazy(()=>Promise.all([n.e(26),n.e(973)]).then(n.bind(n,5973))),w=e.lazy(()=>n.e(507).then(n.bind(n,507))),F=()=>{const a=(0,p._U)(u.fo),t=(0,p._U)(u.pk),s=(0,p._U)(u.Vq),i=(0,p._U)(u.Oq),{whiteboardOwner:c}=(0,I.l0)(),r=(0,p._U)(u.ln);(0,b.T4)(),(0,C.WG)();const o=(0,p.cw)(),_=(0,D.tQ)(),l=(0,A.M)("headlessConfig","uiMode"),{uiViewMode:d,isAudioOnly:z}=(0,D.L3)(),X=(0,D.ZP)(),ce=(0,D.PS)();if((0,e.useEffect)(()=>{if(!r)return;const be=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_AUDIO_PLAYLIST||"[]"),Ue=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_VIDEO_PLAYLIST||"[]");Ue.length>0&&o.videoPlaylist.setList(Ue),be.length>0&&o.audioPlaylist.setList(be)},[r,o]),!a)return null;let U;return a===X?U=L:ce?U=B:c?U=k:(t&&t.id!==s?.id||i)&&!z?U=j.Z:d===S.FU||_&&l===S.FU?U=w:U=le,e.createElement(e.Suspense,{fallback:e.createElement($.Z,null)},e.createElement(h.k,{css:{size:"100%",position:"relative"}},e.createElement(U,null),e.createElement(Z.Z,null)))};var y=n(510),V=n(455),W=n(1554),T=n(6722),v=n(8287),m=n(9057),g=n(8721),E=n(9024),R=n(7777),J=n(9990);function se(a){if(!a)return"";let t=Math.floor(a/60);t<10&&(t=`0${String(t)}`);let s=Math.floor(a%60);return s<10&&(s=`0${String(s)}`),`${t}:${s}`}const G=e.memo(({name:a,metadata:t,duration:s,selected:i,onClick:c})=>e.createElement(E.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:c},e.createElement(h.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(g.x,{variant:"md",css:{color:i?"$brandDefault":"$textPrimary"}},a),e.createElement(g.x,{variant:"xs"},se(s))),t?.description&&e.createElement(g.x,{variant:"xs",css:{mt:"$4"}},t?.description)));var ee=n(8961),ae=Object.defineProperty,ie=Object.defineProperties,me=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,ye=(a,t,s)=>t in a?ae(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,ne=(a,t)=>{for(var s in t||(t={}))re.call(t,s)&&ye(a,s,t[s]);if(oe)for(var s of oe(t))Te.call(t,s)&&ye(a,s,t[s]);return a},_e=(a,t)=>ie(a,me(t)),ge=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const he=({type:a,actions:t})=>e.createElement(e.Fragment,null,e.createElement(g.x,{as:"label",htmlFor:`${a}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${a}PlaylistBrowse`,accept:a===u.Mv.audio?"audio/*":"video/*",onChange:s=>{const i=s.target.files[0],c=i.lastModified;t.setList([{type:a,id:c,name:i.name,url:URL.createObjectURL(i)}]),t.play(c)},style:{display:"none"}})),Se=({type:a})=>{const t=a===u.Mv.audio,{active:s,list:i,actions:c}=(0,ee.Z)(a),[r,o]=(0,e.useState)(!1),[_,l]=(0,e.useState)(!1);return!(0,p._U)(u.xf).screen||i.length===0?null:e.createElement(e.Fragment,null,e.createElement(E.L.Root,{open:r,onOpenChange:o},e.createElement(E.L.Trigger,{asChild:!0,"data-testid":a===u.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(R.Z,{active:!s},e.createElement(V.u,{title:t?"Audio Playlist":"Video Playlist"},e.createElement(O.x,null,t?e.createElement(T.Z,null):e.createElement(v.Z,null))))),e.createElement(E.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(h.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(g.x,{variant:"md",css:{flex:"1 1 0"}},t?"Audio Player":"Video Playlist"),e.createElement(he,{type:a,actions:c}),e.createElement(R.Z,{css:{mr:"-$4"},onClick:()=>ge(void 0,null,function*(){s&&(yield c.stop()),o(!1),l(!1)})},e.createElement(m.Z,{width:24,height:24}))),!_&&e.createElement(O.x,{css:{maxHeight:"$96",overflowY:"auto"}},i.map(z=>e.createElement(G,_e(ne({key:z.id},z),{onClick:X=>ge(void 0,null,function*(){X.preventDefault(),yield c.play(z.id),t||o(!1)})})))),t&&e.createElement(J.iS,{onToggle:()=>l(z=>!z)}))))};var Ce=n(8275),fe=n(6408),Fe=n(1243),We=n(32),En=n(6422),Ke=n(7158),hn=n(4241),fn=n(8546),Pn=n(8703),Ze=n(8981),bn=n(3510),Ge=n(8565),An=n(7632),ze=n(9290),Ye=n(7281),Tn=n(198),kn=n(5231),yn=n(8198),Q=n(622),Ee=n(7688),Sn=n(1529),Cn=n(5513),Ae=n(7097),Me=n(9953),Xe=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const Dn=({open:a,onOpenChange:t})=>{const s=(0,p._U)(u.AI),i=(0,p._U)((0,u.EP)(S._8.recordingUrl)),[c,r]=(0,e.useState)(S.w7),[o,_]=(0,D.$h)(S._8.recordingStarted),{isBrowserRecordingOn:l,isStreamingOn:d,isHLSRunning:z}=(0,Ke.v)(),X=(0,p.cw)();return!s?.browserRecording||z?null:l?e.createElement(Q.V.Root,{open:a,onOpenChange:t},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10",bg:"#201617"}},e.createElement(Q.V.Title,null,e.createElement(h.k,{gap:2,css:{c:"$error"}},e.createElement(yn.Z,null),e.createElement(g.x,{css:{c:"inherit"},variant:"h6"},"End Recording"))),e.createElement(g.x,{variant:"sm",css:{c:"$textMedEmp",my:"$8"}},"Are you sure you want to end recording? You can\u2019t undo this action."),e.createElement(h.k,{justify:"end",css:{mt:"$12"}},e.createElement(Q.V.Close,{asChild:!0},e.createElement(Ee.z,{outlined:!0,css:{borderColor:"$secondaryLight",mr:"$4"}},"Don't end")),e.createElement(Ee.z,{"data-testid":"stop_recording_confirm_mobile",variant:"danger",icon:!0,onClick:()=>Xe(void 0,null,function*(){try{yield X.stopRTMPAndRecording()}catch(ce){Ae.y.addToast({title:ce.message,variant:"error"})}t(!1)})},"End recording"))))):e.createElement(Q.V.Root,{open:a,onOpenChange:t},e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(Q.V.Title,null,e.createElement(g.x,{variant:"h6"},"Start Recording")),e.createElement(Sn.P,{testId:"recording_resolution_mobile",css:{flexDirection:"column",alignItems:"start"},onResolutionChange:r}),e.createElement(Ee.z,{"data-testid":"start_recording_confirm_mobile",variant:"primary",icon:!0,css:{ml:"auto"},type:"submit",disabled:o||d,onClick:()=>Xe(void 0,null,function*(){try{_(!0),yield X.startRTMPOrRecording({meetingURL:i||(0,Me.Il)(),resolution:(0,Cn.u)(c),record:!0})}catch(ce){ce.message.includes("stream already running")?Ae.y.addToast({title:"Recording already running",variant:"error"}):Ae.y.addToast({title:ce.message,variant:"error"}),_(!1)}t(!1)})},"Start")))};var Rn=n(7273),On=n(1118),$e=n(6081),In=n(4634),Mn=n(4791);const wn=({onOpenChange:a})=>{var t,s;const i=Ln(),c=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...i],[i]),[r,o]=(0,e.useState)("local-peer"),[_,l]=(0,D.iz)(S.JZ.showStatsOnTiles),[d,z]=(0,e.useState)(!1),X=(0,e.useRef)(),ce=(0,Mn.s)();return(0,e.useEffect)(()=>{r!=="local-peer"&&!i.find(U=>U.id===r)&&o("local-peer")},[i,r]),e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Overlay,null),e.createElement(Q.V.Content,{css:{width:"min(500px, 95%)"}},e.createElement(Q.V.Title,{css:{p:"$4 0"}},e.createElement(h.k,{justify:"between"},e.createElement(h.k,{align:"center",css:{mb:"$1"}},e.createElement(g.x,{variant:"h6",inline:!0},"Stats For Nerds")),e.createElement(Q.V.DefaultClose,{"data-testid":"stats_dialog_close_icon"}))),e.createElement(Rn.E,{css:{mt:"0.8rem"}}),e.createElement(h.k,{justify:"start",gap:4,css:{m:"$10 0"}},e.createElement(On.r,{checked:_,onCheckedChange:l}),e.createElement(g.x,{variant:"body2",css:{fontWeight:"$semiBold"}},"Show Stats on Tiles")),e.createElement(h.k,{direction:"column",css:{mb:"$12",position:"relative",minWidth:0}},e.createElement($e._,{variant:"body2"},"Stats For"),e.createElement(E.L.Root,{"data-testid":"dialog_select_Stats For",open:d,onOpenChange:z},e.createElement(In.l,{title:((t=c.find(({id:U})=>U===r))==null?void 0:t.label)||"Select Stats",css:{mt:"$4"},titleCSS:{mx:0},open:d,ref:X}),e.createElement(E.L.Portal,null,e.createElement(E.L.Content,{align:"start",sideOffset:8,css:{w:(s=X.current)==null?void 0:s.clientWidth,zIndex:1e3}},c.map(U=>e.createElement(E.L.Item,{key:U.id,onClick:()=>{o(U.id)},css:{px:"$9",bg:U.id===r?ce:void 0,c:U.id===r?"$white":"$textPrimary"}},U.label)))))),r==="local-peer"?e.createElement(Un,null):e.createElement(xn,{trackID:r}))))},Ln=()=>{const a=(0,p._U)(u.zK),t=(0,p._U)(u.iZ);return(0,e.useMemo)(()=>Object.values(a).map(i=>{var c;const r=(c=t[i.peerId])==null?void 0:c.name;return{id:i.id,label:`${r} ${i.source} ${i.type}`}}),[a,t])},Un=()=>{var a,t,s,i,c,r;const o=(0,p.p5)(u.fA.localPeerStats);return o?e.createElement(h.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(de,{label:"Packets Lost",value:(a=o.subscribe)==null?void 0:a.packetsLost}),e.createElement(de,{label:"Jitter",value:(t=o.subscribe)==null?void 0:t.jitter}),e.createElement(de,{label:"Publish Bitrate",value:De((s=o.publish)==null?void 0:s.bitrate,"b/s")}),e.createElement(de,{label:"Subscribe Bitrate",value:De((i=o.subscribe)==null?void 0:i.bitrate,"b/s")}),e.createElement(de,{label:"Total Bytes Sent",value:De((c=o.publish)==null?void 0:c.bytesSent)}),e.createElement(de,{label:"Total Bytes Received",value:De((r=o.subscribe)==null?void 0:r.bytesReceived)})):null},xn=({trackID:a})=>{const t=(0,p.p5)(u.fA.trackStatsByID(a));if(!t)return null;const s=t.type.includes("inbound");return e.createElement(h.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(de,{label:"Type",value:t.type+" "+t.kind}),e.createElement(de,{label:"Bitrate",value:De(t.bitrate,"b/s")}),e.createElement(de,{label:"Packets Lost",value:t.packetsLost||"-"}),e.createElement(de,{label:"Jitter",value:t.jitter||"-"}),e.createElement(de,{label:s?"Bytes Received":"Bytes Sent",value:De(s?t.bytesReceived:t.bytesSent)}),t.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(de,{label:"Framerate",value:t.framesPerSecond}),!s&&e.createElement(de,{label:"Quality Limitation Reason",value:t.qualityLimitationReason||"-"})))},de=({label:a,value:t})=>e.createElement(O.x,{css:{bg:"$surfaceLight",w:"calc(50% - $6)",p:"$8",r:"$3"}},e.createElement(g.x,{variant:"overline",css:{fontWeight:"$semiBold",color:"$textMedEmp",textTransform:"uppercase"}},a," "),e.createElement(g.x,{variant:"sub1",css:{fontWeight:"$semiBold",color:"$textHighEmp"}},t)),De=(a,t="B",s=2)=>{if(a===0)return"0 "+t;const i=1024,c=s<0?0:s,r=["","K","M","G","T","P","E","Z","Y"].map(_=>_+t),o=Math.floor(Math.log(a)/Math.log(i));return parseFloat((a/Math.pow(i,o)).toFixed(c))+" "+r[o]};var Nn=n(6635),Je=n(3620),Fn=Object.defineProperty,$n=Object.defineProperties,Vn=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,qe=(a,t,s)=>t in a?Fn(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,jn=(a,t)=>{for(var s in t||(t={}))Bn.call(t,s)&&qe(a,s,t[s]);if(Qe)for(var s of Qe(t))Hn.call(t,s)&&qe(a,s,t[s]);return a},Wn=(a,t)=>$n(a,Vn(t)),en=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const Kn=({onOpenChange:a})=>{const[t,s]=(0,Je.o4)(Je.lN.PREVIEW),i=(0,p.cw)(),c=(0,p._U)(u.lA),[r,o]=(0,e.useState)(c),_=()=>en(void 0,null,function*(){const l=r.trim();if(!(!l||l===c))try{yield i.changeName(l),s(Wn(jn({},t||{}),{name:l}))}catch(d){console.error("failed to update name",d),Ae.y.addToast({title:d.message})}finally{a(!1)}});return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Overlay,null),e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(Q.V.Title,{css:{p:"0 $4"}},e.createElement(g.x,{variant:"h6"}," Change Name")),e.createElement("form",{onSubmit:l=>en(void 0,null,function*(){l.preventDefault(),yield _()})},e.createElement(h.k,{justify:"center",align:"center",css:{my:"$8",w:"100%"}},e.createElement(Nn.I,{css:{width:"100%"},value:r,onChange:l=>{o(l.target.value)},autoComplete:"name",required:!0,"data-testid":"change_name_field"})),e.createElement(h.k,{justify:"between",align:"center",css:{width:"100%",gap:"$md",mt:"$10"}},e.createElement(O.x,{css:{w:"50%"}},e.createElement(Q.V.Close,{css:{w:"100%"}},e.createElement(Ee.z,{variant:"standard",css:{w:"100%"},outlined:!0,type:"submit",disabled:!c},"Cancel"))),e.createElement(O.x,{css:{w:"50%"}},e.createElement(Ee.z,{variant:"primary",css:{width:"100%"},type:"submit",disabled:!r.trim()||r.trim()===c,"data-testid":"popup_change_btn"},"Change")))))))};var nn=n(8953),Zn=n(5873),Gn=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const zn=({onClick:a})=>{const t=(0,b.ED)(),s=(0,p._U)(u.AI),i=(0,p._U)(u.I3),c=(0,p._U)(u.fo),r=(0,p.cw)(),o=(0,We.Z)(ze.vc.media.sm),_=H("selfRoleChangeTo"),l=(0,e.useMemo)(()=>(0,Me.tN)(_,t),[t,_]);return s.changeRole?o?e.createElement(E.L.Item,{onClick:a},e.createElement(nn.Z,null),e.createElement(g.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(E.L.SubMenu,null,e.createElement(E.L.TriggerItem,{"data-testid":"change_my_role_btn"},e.createElement(nn.Z,null),e.createElement(g.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(Zn.Z,null)),e.createElement(E.L.SubMenuContent,{sideOffset:2,alignOffset:-5,css:{"@md":{w:"$64"}}},l.map((d,z)=>e.createElement(E.L.Item,{key:d,css:{justifyContent:"space-between"},onClick:()=>Gn(void 0,null,function*(){try{yield r.changeRole(i,d,!0)}catch(X){Ae.y.addToast({title:X.message})}}),"data-testid":"change_to_role_"+d},e.createElement(g.x,{variant:"sm"},d),c===d&&e.createElement(Ge.Z,{width:16,height:16}))))):null};var tn=n(3055),pe=n(4778);const Yn=({setShowOpenUrl:a})=>window.CropTarget?e.createElement(E.L.Item,{onClick:()=>{a(!0)},"data-testid":"embed_url_btn"},e.createElement(tn.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Embed URL")):null;function Xn({onOpenChange:a}){const[t,s]=(0,D.$h)(S._8.embedConfig),[i,c]=(0,e.useState)(t?.url||""),r=!!t?.url,o=r&&i&&i!==t.url;return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(pe.cZ,{title:"Embed URL",Icon:tn.Z},e.createElement(pe.OD,{title:"URL",value:i,onChange:c,placeholder:"https://www.youtube.com/embed/dQw4w9WgXcQ",type:"url"}),e.createElement(pe.DP,null,e.createElement(g.x,null,"Embed a url and share with everyone in the room. Ensure that you're sharing the current tab when the prompt opens. Note that not all websites support being embedded.")),e.createElement(pe.DP,{justify:"end"},r?e.createElement(e.Fragment,null,e.createElement(Ee.z,{variant:"primary",type:"submit",disabled:!o,onClick:()=>{s({url:i,shareScreen:t.shareScreen}),a(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Update Embed"),e.createElement(Ee.z,{variant:"danger",type:"submit",onClick:()=>{s({url:""}),a(!1)},"data-testid":"embed_url_btn"},"Stop Embed")):e.createElement(e.Fragment,null,e.createElement(Ee.z,{variant:"primary",type:"submit",disabled:!i.trim(),onClick:()=>{s({url:i}),a(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Just Embed"),e.createElement(Ee.z,{variant:"primary",type:"submit",disabled:!i.trim(),onClick:()=>{s({url:i,shareScreen:!0}),a(!1)},"data-testid":"embed_url_btn"},"Embed and Share")))))}var Jn=n(7854),Qn=n(8523),Pe=n.n(Qn),qn=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const et=()=>{const[a,t]=(0,e.useState)(Pe().isFullscreen),s=(0,e.useCallback)(()=>qn(void 0,null,function*(){if(!Pe().isEnabled){Ae.y.addToast({title:"Fullscreen feature not supported"});return}try{a?yield Pe().exit():yield Pe().request()}catch(i){Ae.y.addToast({title:i.message})}}),[a]);return(0,e.useEffect)(()=>{const i=()=>{t(Pe().isFullscreen)};return Pe().isEnabled&&Pe().on("change",i),()=>{Pe().isEnabled&&Pe().off("change",i)}},[]),{allowed:Pe().isEnabled,isFullscreen:a,toggleFullscreen:s}},nt=()=>{const{allowed:a,isFullscreen:t,toggleFullscreen:s}=et();return a?e.createElement(E.L.Item,{onClick:()=>{s()},"data-testid":"full_screen_btn"},e.createElement(Jn.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},t?"Exit ":"Go ","Fullscreen")):null};var we=n(8673),tt=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const st=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],at=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],it=({onOpenChange:a})=>{const t=(0,b.ED)(),s=(0,p.cw)(),[i,c]=(0,e.useState)(!1),[r,o]=(0,e.useState)(),[_,l]=(0,e.useState)(),[d,z]=(0,e.useState)(),X=(0,e.useCallback)(()=>tt(void 0,null,function*(){yield s.setRemoteTracksEnabled({enabled:i,type:r,source:d,roles:_?[_]:void 0}),a(!1)}),[_,i,r,d,s,a]);return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(pe.cZ,{title:"Mute/Unmute Remote Tracks",Icon:Ze.Z},e.createElement(pe.z2,{title:"Role",options:[{label:"All Roles",value:""},...t.map(ce=>({label:ce,value:ce}))],selected:_,keyField:"value",labelField:"label",onChange:l}),e.createElement(pe.z2,{title:"Track type",options:at,selected:r,onChange:o,keyField:"value",labelField:"label"}),e.createElement(pe.z2,{title:"Track source",options:st,selected:d,onChange:z,keyField:"value",labelField:"label"}),e.createElement(pe.DP,null,e.createElement(g.x,{variant:"md"},"Track status"),e.createElement(we.E.Root,{value:i,onValueChange:c},e.createElement(h.k,{align:"center",css:{mr:"$8"}},e.createElement(we.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(we.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(h.k,{align:"center",css:{cursor:"pointer"}},e.createElement(we.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(we.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(pe.DP,{justify:"end"},e.createElement(Ee.z,{variant:"primary",onClick:X},"Apply"))))};var Le=n(9478);const Ve=En.eC.getOS().name.toLowerCase(),lt=Ve==="mac os",rt=Ve==="android"||Ve==="ios",sn=()=>{const a=(0,p._U)(u.AI),t=(0,p._U)(u.xf),s=(0,p._U)(u.I3),i=(0,p._U)(u.fo),c=(0,p.cw)(),r=(0,p._U)((0,u.EP)(S._8.hlsStats)),[o,_]=(0,e.useState)(!1),[l,d]=(0,e.useState)(!1),[z,X]=(0,e.useState)(!1),[ce,U]=(0,e.useState)(!1),[be,Ue]=(0,e.useState)(!1),[pn,mn]=(0,e.useState)(!1),[jt,un]=(0,e.useState)(!1),[vn,gn]=(0,e.useState)(!1),Wt=(0,We.Z)(ze.vc.media.md),{isBrowserRecordingOn:Kt}=(0,Ke.v)();return e.createElement(e.Fragment,null,e.createElement(E.L.Root,{open:o,onOpenChange:_},e.createElement(E.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(R.Z,null,e.createElement(V.u,{title:"More options"},e.createElement(O.x,null,e.createElement(hn.Z,null))))),e.createElement(E.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96","@md":{w:"$64"}}},Wt&&a?.browserRecording?e.createElement(e.Fragment,null,e.createElement(E.L.Item,{onClick:()=>gn(je=>!je)},e.createElement(fn.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},Kt?"Stop":"Start"," Recording")),e.createElement(E.L.ItemSeparator,null)):null,e.createElement(E.L.Item,{onClick:()=>d(je=>!je),"data-testid":"change_name_btn"},e.createElement(Pn.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(zn,{onClick:()=>un(!0)}),e.createElement(nt,null),t.screen&&e.createElement(Yn,{setShowOpenUrl:U}),a.mute&&e.createElement(E.L.Item,{onClick:()=>X(!0),"data-testid":"mute_all_btn"},e.createElement(Ze.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(E.L.ItemSeparator,null),e.createElement(E.L.Item,{onClick:()=>Ue(!0),"data-testid":"device_settings_btn"},e.createElement(bn.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Settings")),Le.T.enableStatsForNerds&&(i==="hls-viewer"?e.createElement(E.L.Item,{onClick:()=>c.setAppData(S._8.hlsStats,!r),"data-testid":"hls_stats"},e.createElement(Ye.X.Root,{css:{margin:"$2"},checked:r,onCheckedChange:()=>c.setAppData(S._8.hlsStats,!r)},e.createElement(Ye.X.Indicator,null,e.createElement(Ge.Z,{width:16,height:16}))),e.createElement(h.k,{justify:"between",css:{width:"100%"}},e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Show HLS Stats"),rt?null:e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},`${lt?"\u2318":"ctrl"} + ]`))):e.createElement(E.L.Item,{onClick:()=>mn(!0),"data-testid":"stats_for_nreds_btn"},e.createElement(An.Z,null),e.createElement(g.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds"))))),z&&e.createElement(it,{onOpenChange:X}),l&&e.createElement(Kn,{onOpenChange:d}),be&&e.createElement(kn.Z,{open:!0,onOpenChange:Ue}),Le.T.enableStatsForNerds&&pn&&e.createElement(wn,{open:pn,onOpenChange:mn}),jt&&e.createElement(Tn.t,{peerId:s,onOpenChange:un}),vn&&e.createElement(Dn,{open:vn,onOpenChange:gn}),ce&&e.createElement(Xn,{onOpenChange:U}))};var ct=n(1182),an=n(5106);function ot(a,t){let s=a.filter(z=>z.srcObject!==null).length;const i=t.getContext("2d");i.fillStyle="#000000";const c=t.width,r=t.height;if(s===0){i.fillRect(0,0,c,r);return}else if(s===1||s===2){i.drawImage(a[0],0,0,c,r);return}const o=s<=2?1:2,_=Number(Math.ceil(s/o)),l=r/o,d=c/_;dt(o,_,l,d,a,i)}function _t(a){const t=a.getContext("2d");t.fillStyle="#000000";const s=a.width,i=a.height;t.fillRect(0,0,s,i)}function dt(a,t,s,i,c,r){let o=0;for(let _=0;_<a;_++){const l=_*s;for(let d=0;d<t;d++){const z=d*i,X=c[o];!X||X.srcObject===null?r.fillRect(z,l,i,s):r.drawImage(X,z,l,i,s),o++}}}var pt=Object.defineProperty,mt=(a,t,s)=>t in a?pt(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,ut=(a,t,s)=>(mt(a,typeof t!="symbol"?t+"":t,s),s),ke=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const ln=4,vt=30,gt=900,Et=600,rn="leavepictureinpicture",ue={starting:"starting",started:"started",stopping:"stopping",stopped:"stopped"};class ht{constructor(){ut(this,"stop",()=>ke(this,null,function*(){var t;this.state!==ue.stopped&&(this.state=ue.stopping,(t=this.pipVideo)==null||t.removeEventListener(rn,this.stop),this.timeoutRef&&an.gr(this.timeoutRef),this.isOn()&&this.exitPIP(),yield this.detachOldAttachNewTracks(this.tracksToShow,[]),this.onStateChange(!1),this.reset(),this.state=ue.stopped)})),this.reset()}reset(){console.debug("resetting PIP state"),this.canvas=null,this.pipVideo=null,this.timeoutRef=null,this.hmsActions=null,this.videoElements=[],this.tracksToShow=[],this.onStateChange=()=>{},this.state=ue.stopped}isSupported(){return!!document.pictureInPictureEnabled}isOn(){return!!document.pictureInPictureElement}start(t,s){return ke(this,null,function*(){if(!this.isSupported())throw new Error("pip is not supported on this browser");if(console.debug("starting PIP, current state",this.state),this.state===ue.started)yield this.stop();else if(this.state===ue.starting)return;this.state=ue.starting;try{yield this.init(t,s),this.pipVideo.addEventListener(rn,this.stop),this.renderLoop(),this.isOn()||(yield this.requestPIP()),console.debug("pip started"),this.state=ue.started,this.onStateChange(!0)}catch(i){console.error("error in request pip",i),this.state=ue.stopped}})}updatePeersAndTracks(t,s){return ke(this,null,function*(){if(!this.canvas)return;const i=this.pickTracksToShow(t,s),c=this.tracksToShow;this.tracksToShow=this.orderNewTracksToShow(i,c);try{yield this.detachOldAttachNewTracks(c,this.tracksToShow,s)}catch(r){console.error("error in detaching/attaching tracks",r)}})}init(t,s){return ke(this,null,function*(){yield this.initMediaElements(),this.hmsActions=t,this.onStateChange=s})}initMediaElements(){return ke(this,null,function*(){if(!this.canvas){const{canvas:t,pipVideo:s}=this.initializeCanvasAndVideoElement();this.canvas=t,this.pipVideo=s,this.videoElements=this.initializeVideoElements();const i=this.pipVideo.play();_t(this.canvas),yield i}})}initializeCanvasAndVideoElement(){const t=document.createElement("canvas");t.width=gt,t.height=Et;const s=document.createElement("video");return s.muted=!0,s.srcObject=t.captureStream(),{canvas:t,pipVideo:s}}initializeVideoElements(){let t=[];for(let s=0;s<ln;s++){const i=document.createElement("video");i.autoplay=!0,i.playsinline=!0,t.push(i)}return t}renderLoop(){const t=1e3/vt;this.timeoutRef=an.iK(()=>{this.state===ue.stopping||this.state===ue.stopped||(this.state===ue.started&&ot(this.videoElements,this.canvas),this.renderLoop())},t)}requestPIP(){return ke(this,null,function*(){try{this.isOn()&&this.exitPIP(),yield this.pipVideo.requestPictureInPicture()}catch(t){throw console.error("error in requestpip",t,"state",this.state),t}})}exitPIP(){document.exitPictureInPicture()}pickTracksToShow(t,s){var i;const c=[];for(const r of t){if(c.length===ln)break;r.videoTrack&&((i=s[r.videoTrack])==null?void 0:i.enabled)&&c.push(r.videoTrack)}return c}orderNewTracksToShow(t,s){const i=[],c=[];t.forEach(r=>{const o=s.indexOf(r);o!==-1&&o<t.length?i[o]=r:c.push(r)});for(let r=0;r<t.length;r++)i[r]||(i[r]=c.shift());return i}detachOldAttachNewTracks(t,s,i=null){return ke(this,null,function*(){const c=Math.max(t.length,s.length);for(let r=0;r<c;r++)t[r]!==s[r]&&(t[r]&&((!i||i[t[r]])&&(yield this.hmsActions.detachVideo(t[r],this.videoElements[r])),this.videoElements[r]&&(this.videoElements[r].srcObject=null)),s[r]&&(yield this.hmsActions.attachVideo(s[r],this.videoElements[r])))})}}const Re=new ht;var ft=Object.defineProperty,Pt=(a,t,s)=>t in a?ft(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,Oe=(a,t,s)=>(Pt(a,typeof t!="symbol"?t+"":t,s),s),cn=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});class bt{constructor(){Oe(this,"setup",(t,s)=>{this.actions=t,this.store=s,this.initState(),this.setUpHandlers()}),Oe(this,"initState",()=>{var t,s,i,c;const r=this.store.getState(u.uX),o=this.store.getState(u.um);(s=(t=navigator.mediaSession)==null?void 0:t.setMicrophoneActive)==null||s.call(t,r),(c=(i=navigator.mediaSession)==null?void 0:i.setCameraActive)==null||c.call(i,o),this.store.subscribe(_=>{var l,d;(d=(l=navigator.mediaSession)==null?void 0:l.setMicrophoneActive)==null||d.call(l,_)},u.uX),this.store.subscribe(_=>{var l,d;(d=(l=navigator.mediaSession)==null?void 0:l.setCameraActive)==null||d.call(l,_)},u.um)}),Oe(this,"toggleMic",()=>cn(this,null,function*(){console.log("toggle mic clicked in pip");const t=this.store.getState(u.uX);yield this.actions.setLocalAudioEnabled(!t)})),Oe(this,"toggleCam",()=>cn(this,null,function*(){console.log("toggle cam clicked in pip");const t=this.store.getState(u.um);yield this.actions.setLocalVideoEnabled(!t)})),Oe(this,"leave",()=>{console.log("leave called from pip"),this.actions.leave()}),Oe(this,"setUpHandlers",()=>{if(navigator.mediaSession)try{navigator.mediaSession.setActionHandler("togglemicrophone",this.toggleMic),navigator.mediaSession.setActionHandler("togglecamera",this.toggleCam),navigator.mediaSession.setActionHandler("hangup",this.leave)}catch(t){console.error("error in setting media session handlers",t)}})}}const At=new bt,Tt=()=>{const a=(0,p._U)(u.fo),[t,s]=(0,e.useState)(Re.isOn()),i=(0,p.cw)(),c=(0,p.gg)(),r=(0,e.useCallback)(()=>{t?Re.stop().catch(o=>console.error("error in stopping pip",o)):(Re.start(i,s).catch(o=>console.error("error in starting pip",o)),At.setup(i,c))},[i,t,c]);return(0,e.useEffect)(()=>()=>{Re.stop().catch(o=>console.error("error in stopping pip on unmount",o))},[]),!Re.isSupported()||a===S.Pj?null:e.createElement(e.Fragment,null,e.createElement(V.u,{title:`${t?"Deactivate":"Activate"} picture in picture view`},e.createElement(R.Z,{active:!t,key:"pip",onClick:()=>r(),"data-testid":"pip_btn"},e.createElement(ct.Z,null))),t&&e.createElement(kt,{setIsPipOn:s}))},kt=()=>{const a=(0,p._U)(u.zK),t=(0,p._U)(u.LY);return(0,e.useEffect)(()=>{Re.updatePeersAndTracks(t,a).catch(s=>{console.error("error in updating pip",s)})},[a,t]),null},on=Tt;var yt=n(4685),Be=n(8160);const _n=({css:a})=>{const t=(0,p._U)(u.xf),s=(0,D.L3)(S.JZ.isAudioOnly),{amIScreenSharing:i,screenShareVideoTrackId:c,toggleScreenShare:r}=(0,M.N)(),o=i&&!!c;return!t.screen||!(0,Me.Lo)()?null:Be.createElement(V.u,{title:`${o?"Stop":"Start"} screen sharing`},Be.createElement(R.Z,{active:!o,css:a,disabled:s,onClick:()=>{r()},"data-testid":"screen_share_btn"},Be.createElement(yt.Z,null)))},St=({onClose:a})=>{const t=(0,p.cw)();return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:s=>!s&&a()},e.createElement(pe.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(pe.DP,{justify:"end"},e.createElement(Ee.z,{variant:"primary",onClick:()=>{t.setScreenShareEnabled(!0,{audioOnly:!0,displaySurface:"browser"}).catch(console.error),a()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var Ct=n(9156),Dt=n(370),dn=n(3600),xe=n(8160);const Ne=()=>{const a=(0,p._U)(u.SI),t=(0,dn.fg)(S.yb.CHAT),s=(0,dn.Jp)(S.yb.CHAT);return xe.createElement(V.u,{key:"chat",title:`${t?"Close":"Open"} chat`},xe.createElement(R.Z,{onClick:s,active:!t,"data-testid":"chat_btn"},a===0?xe.createElement(Ct.Z,null):xe.createElement(Dt.Z,{"data-testid":"chat_unread_btn"})))};var Rt=n(550),Ot=n(1290),He=n(8160),Ie=(a,t,s)=>new Promise((i,c)=>{var r=l=>{try{_(s.next(l))}catch(d){c(d)}},o=l=>{try{_(s.throw(l))}catch(d){c(d)}},_=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);_((s=s.apply(a,t)).next())});const It=()=>{const a=(0,e.useRef)(null),t=(0,p.cw)(),[s,i]=(0,e.useState)(!1),[c,r]=(0,e.useState)(!1),o=(0,p._U)((0,u.fC)("@100mslive/hms-noise-suppression")),{selectedDeviceIDs:_}=(0,Rt.L)(),l=o&&!s,d=(0,e.useCallback)(()=>Ie(void 0,null,function*(){if(!a.current){const{HMSNoiseSuppressionPlugin:U}=yield Promise.all([n.e(53),n.e(301)]).then(n.bind(n,2053));a.current=new U({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.NS_DURATION_TIME_IN_MS)}}),[]),z=(0,e.useCallback)(()=>Ie(void 0,null,function*(){a.current&&(yield t.removePluginFromAudioTrack(a.current),a.current=null)}),[t]),X=(0,e.useCallback)(U=>Ie(void 0,null,function*(){let be="adding Noise Suppression plugin failed, see docs";U.message&&(be=U.message),Ae.y.addToast({title:be}),i(!0),yield z(),a.current=null,console.error(U)}),[z]),ce=(0,e.useCallback)(()=>Ie(void 0,null,function*(){try{i(!1),yield d();const U=t.validateAudioPluginSupport(a.current);if(U.isSupported)yield t.addPluginToAudioTrack(a.current);else{const be=U.errMsg;yield X(be)}}catch(U){yield X(U)}}),[t,X,d]);return(0,e.useEffect)(()=>{Ie(void 0,null,function*(){a.current||(yield d());const U=t.validateAudioPluginSupport(a.current);r(U.isSupported),i(!U.isSupported)})},[_.audioInput,t,d]),c&&Le.T.showNS()?He.createElement(V.u,{title:`Turn ${l?"off":"on"} noise suppression`},He.createElement(R.Z,{active:!l,disabled:s,onClick:()=>Ie(void 0,null,function*(){l?yield z():yield ce()}),"data-testid":"noise_suppression_btn"},He.createElement(Ot.Z,null))):null};var Mt=n(3951);const wt=e.lazy(()=>Promise.all([n.e(813),n.e(922)]).then(n.bind(n,4922))),Lt=()=>{const{amIScreenSharing:a,screenShareVideoTrackId:t,screenShareAudioTrackId:s,toggleScreenShare:i}=(0,M.N)(),c=(0,p._U)(u.xf),r=a&&!t&&!!s,[o,_]=(0,e.useState)(!1);return!c.screen||!(0,Me.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(V.u,{title:`${r?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(R.Z,{active:!r,onClick:()=>{a?i():_(!0)},"data-testid":"screenshare_audio"},e.createElement(y.Z,null))),o&&e.createElement(St,{onClose:()=>_(!1)}))},Ut=()=>e.createElement(W.$.Root,null,e.createElement(W.$.Left,null,e.createElement(Lt,null),e.createElement(Se,{type:u.Mv.audio}),e.createElement(Se,{type:u.Mv.video}),Le.T.enableWhiteboard?e.createElement(I.VK,null):null,e.createElement(Mt.f,null),e.createElement(It,null),Le.T.enableTranscription&&e.createElement(wt,null),e.createElement(h.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Fe.Z,{isMobile:!0}))),e.createElement(W.$.Center,null,e.createElement(Ce.l,null),e.createElement(_n,null),e.createElement(on,null),e.createElement(sn,null),e.createElement(fe.R,null),e.createElement(h.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Ne,null))),e.createElement(W.$.Right,null,e.createElement(Fe.Z,null),e.createElement(Ne,null)));var xt=n(9209);const Nt=()=>e.createElement(W.$.Root,{css:{flexWrap:"nowrap","@md":{justifyContent:"center"}}},e.createElement(W.$.Left,{css:{"@md":{w:"unset",p:"0"}}},e.createElement(Ce.l,null)),e.createElement(W.$.Center,{css:{"@md":{w:"unset"}}},e.createElement(_n,{css:{"@sm":{display:"none"}}}),e.createElement(O.x,{css:{"@md":{display:"none"}}},e.createElement(on,null)),e.createElement(O.x,{css:{display:"none","@md":{display:"flex",alignItems:"center",mx:"$4"}}},e.createElement(xt.Q$,null)),e.createElement(sn,null),e.createElement(O.x,{css:{"@md":{display:"none"}}},e.createElement(fe.R,null)),e.createElement(h.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Ne,null))),e.createElement(W.$.Right,null,e.createElement(Fe.Z,null),e.createElement(Ne,null))),Ft=()=>(0,Me.ZM)()?e.createElement(Nt,null):e.createElement(Ut,null);var $t=n(610);const Vt=()=>{var a,t;const s=(0,p.cw)(),i=(0,D.tQ)(),c=(0,p._U)(u.lj);return!c?.role||i?null:e.createElement(pe.wq,{title:"Role Change Request",onOpenChange:r=>!r&&s.rejectChangeRole(c),body:`${(a=c?.requestedBy)==null?void 0:a.name} has requested you to change your role to ${(t=c?.role)==null?void 0:t.name}.`,onAction:()=>{s.acceptChangeRole(c)},actionText:"Accept"})};var Bt=n(8760);const Ht=()=>{const a=(0,Bt.H)(),{roomId:t,role:s}=(0,f.UO)(),i=(0,D.tQ)(),c=(0,p._U)(u.Pz),r=(0,P.Z)(c),o=(0,p._U)(u.ln),_=(0,p.cw)();return(0,e.useEffect)(()=>{if(!t){a("/");return}!r&&!(c===u.wk.Connecting||c===u.wk.Reconnecting||o)&&a(s?`/preview/${t||""}/${s}`:`/preview/${t||""}`)},[o,r,c,a,s,t]),(0,e.useEffect)(()=>{i&&_.ignoreMessageTypes(["chat"])},[i,_]),(0,e.useEffect)(()=>()=>{o&&_.leave()},[_,o]),o?e.createElement(h.k,{css:{size:"100%"},direction:"column"},!i&&e.createElement(O.x,{css:{h:"$18","@md":{h:"$17"}},"data-testid":"header"},e.createElement($t.h,null)),e.createElement(O.x,{css:{w:"100%",flex:"1 1 0",minHeight:0},"data-testid":"conferencing"},e.createElement(F,null)),!i&&e.createElement(O.x,{css:{flexShrink:0,minHeight:"$24"},"data-testid":"footer"},e.createElement(Ft,null)),e.createElement(Vt,null)):e.createElement($.Z,null)}},5349:(ve,Y,n)=>{n.d(Y,{m:()=>N,O:()=>B});var e=n(8160),f=n(32),P=n(9290),p=n(6939),u=n(8485),h=n(8721);const O=n.p+"static/media/first_person.0917322d0bba25059a53.png",$=e.memo(()=>e.createElement(p.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${O})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},"data-testid":"first_person_img"},e.createElement(u.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(h.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(h.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(h.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join.")))),M=(0,P.zo)("img",{width:"100%",height:"auto",r:"$3"});var q=n(8051);const K=4,D=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_WEBINAR_PROPS||"{}"),S=D?.ROOM_IDS||[],x=D?.IMAGE_FILE||"",te=D?.LINK_HREF||"https://100ms.live/",N=({peers:H,maxTileCount:le})=>{const j=P.vc.media.md,Z=(0,f.Z)(j);return e.createElement(e.Fragment,null,e.createElement(p.x,{css:{flex:"1 1 0",height:"100%",mx:"$8","@md":{flex:"2 1 0"}}},H&&H.length>0?e.createElement(q.Z,{peers:H,maxTileCount:Z?K:le}):S.some(I=>window.location.href.includes(I))?e.createElement(p.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:te,target:"_blank",rel:"noreferrer"},e.createElement(M,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:x}))):e.createElement($,null)))},B=({peers:H})=>e.createElement(u.k,{direction:"column",css:{flex:"0 0 20%",mx:"$8","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(u.k,{css:{flex:"1 1 0"},align:"end"},H&&H.length>0&&e.createElement(q.Z,{peers:H,maxColCount:2})))},3844:(ve,Y,n)=>{n.d(Y,{O:()=>P});const e="peerName",f=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),P=({peerName:p,isLocal:u,track:h})=>{const O=p!==void 0;if(!O||!h)return O?f.get([u,void 0].toString()).replace(e,p):"";const $=h.volume===0;let M=f.get([u,h.source].toString());return M?M=M.replace(e,p):M=`${p} ${h.source}`,M=`${M}${h.degraded?"(Degraded)":""}`,`${M}${$?" (Muted for you)":""}`}},535:(ve,Y,n)=>{n.d(Y,{s:()=>y,Z:()=>v});var e=n(8160),f=n(32),P=n(9067),p=n(8081),u=n(9290),h=n(8485),O=n(6939),$=n(2843),M=n(8379),q=n(8523),K=n.n(q),D=n(9057),S=n(6532),x=n(7854),te=n(8721),N=n(5861),B=n(3074),H=n(9990),le=n(6773),j=n(5581);const Z=e.memo(({peerId:m})=>{const g=(0,P._U)((0,p.CI)(m)),E=(0,P._U)(p.k0.selectedItem),R=(0,le.L3)(j.JZ.isAudioOnly),J=(0,P.cw)(),se=(0,e.useRef)(null),[G,ee]=(0,$.Z)(!1),ae=(0,M.Z)(se,G,{onClose:()=>ee(!1)});return e.createElement(h.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:se},E&&e.createElement(h.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(te.x,{css:{color:"$textPrimary"}},E.name),e.createElement(N.h,{css:{color:"$white"},onClick:()=>{J.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(D.Z,null))),e.createElement(B.n,{trackId:g?.id,attach:!R,css:{"@lg":{objectFit:"contain",h:"auto"},r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(H.Nc,null,K().enabled&&e.createElement(N.h,{onClick:()=>ee(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},ae?e.createElement(S.Z,null):e.createElement(x.Z,null))))});var I=n(4685),A=n(7688),C=(m,g,E)=>new Promise((R,J)=>{var se=ae=>{try{ee(E.next(ae))}catch(ie){J(ie)}},G=ae=>{try{ee(E.throw(ae))}catch(ie){J(ie)}},ee=ae=>ae.done?R(ae.value):Promise.resolve(ae.value).then(se,G);ee((E=E.apply(m,g)).next())});const b=()=>{const m=(0,P.cw)();return e.createElement(h.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$surfaceDefault",textAlign:"center"}},e.createElement(I.Z,{width:48,height:48}),e.createElement(te.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(A.z,{variant:"danger",onClick:()=>C(void 0,null,function*(){yield m.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(D.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var k=n(9477),L=n(8051),w=n(8329);const F=()=>{var m;const g=u.vc.media.lg,E=(0,f.Z)(g),R=(0,P._U)(p.BK),J=(0,P._U)(p.I3),se=(0,P._U)(p.fo),G=(0,P._U)(p.pk),ee=(0,P._U)(p.Oq),ae=((m=G?.roleName)==null?void 0:m.toLowerCase())===se?.toLowerCase(),ie=J===G?.id,me=E||ie||ae,oe=(0,e.useMemo)(()=>{const re=R.filter(Te=>Te.id!==G?.id);return me&&G&&re.unshift(G),re},[R,G,me]);return e.createElement(h.k,{css:{size:"100%"},direction:E?"column":"row"},e.createElement(V,{amIPresenting:ie,peerPresenting:G,peerSharingPlaylist:ee}),e.createElement(h.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4 $8",flex:"0 0 20%","@lg":{flex:"1 1 0"}}},e.createElement(y,{showSidebarInBottom:E,peerScreenSharing:G,isPresenterInSmallTiles:me,smallTilePeers:oe,totalPeers:R.length})))},y=({isPresenterInSmallTiles:m,peerScreenSharing:g,smallTilePeers:E,totalPeers:R,showSidebarInBottom:J})=>{const se=(0,e.useCallback)(G=>g&&G.id!==g.id,[g]);return e.createElement(e.Fragment,null,!m&&e.createElement(T,{peerScreenSharing:g}),e.createElement(W,{showSidebarInBottom:J,smallTilePeers:E,shouldShowScreenFn:se}))},V=({showStats:m,amIPresenting:g,peerPresenting:E,peerSharingPlaylist:R})=>{const J=(0,P._U)((0,p.K6)(E?.id));return R?e.createElement(O.x,{css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(Z,{peerId:R.id})):e.createElement(O.x,{css:{flex:"3 1 0",mx:"$8","@lg":{ml:"$4",maxHeight:"80%"}}},E&&(g&&!["browser","window","application"].includes(J?.displaySurface)?e.createElement(O.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(b,null)):e.createElement(k.Z,{peerId:E?.id})))},W=({smallTilePeers:m,shouldShowScreenFn:g,showStatsOnTiles:E,showSidebarInBottom:R})=>e.createElement(h.k,{css:{flex:"2 1 0"}},m&&m.length>0&&e.createElement(L.Z,{peers:m,maxColCount:R?void 0:2,maxRowCount:R?1:void 0,includeScreenShareForPeer:g,showStatsOnTiles:E})),T=({peerScreenSharing:m,showStatsOnTiles:g})=>m?e.createElement(O.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(w.Z,{showStatsOnTiles:g,width:"100%",height:"100%",peerId:m.id})):null,v=F}}]);

//# sourceMappingURL=411.6cb4f40b.js.map