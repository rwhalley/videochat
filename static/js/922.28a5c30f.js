"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[922],{4922:(Y,E,i)=>{i.r(E),i.d(E,{default:()=>V});var m=i(8160),w=i(108),R=i.n(w),f=i(414),y=i.n(f),u=i(9067),k=i(8081),C=i(6761),A=i(6939),T=i(8721),N=i(455),S=i(5861),O=i(9478),o=i(8160),x=Object.defineProperty,I=Object.defineProperties,U=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,h=(_,e,n)=>e in _?x(_,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):_[e]=n,F=(_,e)=>{for(var n in e||(e={}))L.call(e,n)&&h(_,n,e[n]);if(P)for(var n of P(e))M.call(e,n)&&h(_,n,e[n]);return _},j=(_,e)=>I(_,U(e)),H=(_,e,n)=>(h(_,typeof e!="symbol"?e+"":e,n),n),D=(_,e,n)=>new Promise((t,p)=>{var d=c=>{try{a(n.next(c))}catch(r){p(r)}},s=c=>{try{a(n.throw(c))}catch(r){p(r)}},a=c=>c.done?t(c.value):Promise.resolve(c.value).then(d,s);a((n=n.apply(_,e)).next())});const G=O.T.enableTranscription&&new(R())({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_TRANSCRIPTION_PUSHER_APP_KEY,{cluster:"ap2",authEndpoint:{NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_TRANSCRIPTION_PUSHER_AUTHENDPOINT});let b=null;function V(){const[_,e]=(0,m.useState)(!1),[n,t]=(0,m.useState)(""),[p,d]=(0,m.useState)(""),s=(0,m.useRef)(null),a=(0,u._U)(k.j5),c=(0,u._U)(k.xf),r=(0,u.C1)(),v=(0,m.useCallback)((g=null)=>{s.current||(s.current=new B(t,d),s.current.enabled=!1),g!==!1&&(g=!_),s.current.enableTranscription(g),e(g)},[_]);return(0,m.useEffect)(()=>{b=G.subscribe(`private-${a}`),b.bind("client-transcription",({text:g})=>{if(g){let l=JSON.parse(g);l&&l.transcriptionConfig?v(!_&&l.transcriptionConfig.isEnabled):l&&l.peername&&l.transcript!==""&&(t(l.transcript),d("["+l.peername+"]"),l.isEnabled&&!_&&v(),setTimeout(()=>{t(""),d("")},5e3))}})},[a,_,v]),(0,m.useEffect)(()=>{!r||s.current&&_&&r.type===k.a5.PEER_JOINED&&s.current.broadcast(JSON.stringify({transcriptionConfig:{isEnabled:!0}}))},[r,_]),o.createElement(o.Fragment,null,o.createElement(A.x,{css:{textAlign:"left",fontWeight:"$medium",bottom:"120px",position:"fixed",width:"100%",fontSize:"$20px",zIndex:"1000000",color:"white",textShadow:"0px 0px 6px #000",whiteSpace:"pre-line",paddingLeft:"40px"}}),o.createElement(A.x,{css:{textAlign:"center",fontWeight:"$medium",bottom:"90px",position:"fixed",width:"100%",fontSize:"$20px",zIndex:"1000000",color:"white",textShadow:"0px 0px 6px #000",whiteSpace:"pre-line"}},o.createElement(T.x,{css:{color:"white",textShadow:"0px 0px 6px #000"}},n),o.createElement(T.x,{css:{color:"#c0bbbb",textShadow:"0px 0px 6px #000",textTransform:"capitalize"}},p)),c.audio&&o.createElement(N.u,{title:`Turn ${_?"off":"on"} transcription`},o.createElement(S.h,{active:!_,onClick:v,"data-testid":"transcription_btn"},o.createElement(C.Z,null))))}class B{constructor(e,n){H(this,"broadcast",(t,p="transcription")=>{b.trigger(`client-${p}`,{text:t,eventName:p})}),this.enabled=!1,this.socket=null,this.totalTimeDiff=0,this.totalCount=0,this.streams={},this.setTranscript=e,this.setSpeakingPeer=n,this.initialized=!1,this.lastMessage={},this.localPeerId=null,this.sttTuningConfig={timeSlice:250,desiredSampRate:8e3,numberOfAudioChannels:1,bufferSize:256}}listen(){return D(this,null,function*(){try{const e=window.__hms.sdk.getLocalPeer();this.localPeerId=e.peerId,this.streams[e.peerId]={stream:new MediaStream([e.audioTrack.nativeTrack]),name:e.name};let n={NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"Apple_Terminal",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",NVM_CD_FLAGS:"-q",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_package_dependencies_logrocket_react:"^5.0.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_package_dependencies_react_freeze:"^1.0.3",npm_package_dependencies__100mslive_react_icons:"0.5.0",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_package_dependencies__100mslive_hls_stats:"0.0.1",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"445",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_uuid:"^8.3.2",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",NVM_DIR:"/Users/richwhalley/.nvm",USER:"richwhalley",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.69.1",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies_logrocket:"^2.2.0",npm_package_dependencies__100mslive_hms_noise_suppression:"0.6.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/Cellar/yarn/1.22.19/libexec/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.5.0",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/yarn--1668810417487-0.6104940583583567:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/.config/yarn/link/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies__emoji_mart_react:"^1.0.1",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.apple.Terminal",npm_package_browserslist_production_1:"not dead",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.5.0",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.8.0",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",npm_package_devDependencies_autoprefixer:"^10.4.2",SHLVL:"2",HOME:"/Users/richwhalley",npm_package_dependencies_react_window:"^1.8.7",npm_package_dependencies_hls_js:"^1.2.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"richwhalley",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",PREFIX:"/usr/local",npm_lifecycle_script:"webpack --node-env production",npm_package_dependencies_react:"^18.1.0",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v19.1.0 darwin x64",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",npm_package_devDependencies_css_loader:"^6.5.1",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_DYNAMIC_STT_TOKEN_GENERATION_ENDPOINT,p=yield(yield fetch(n)).json();if(p&&p.token){const d=p.token;this.socket=yield new WebSocket(`wss://api.assemblyai.com/v2/realtime/ws?sample_rate=${this.sttTuningConfig.desiredSampRate}&token=${d}`),this.setTranscript(""),this.socket.onmessage=s=>{try{const a=JSON.parse(s.data);if(a.text&&this.enabled){let c=this.streams[this.localPeerId].name,r=a.text.length>=80?a.text.split(" ").slice(Math.max(a.text.split(" ").length-10,1)).join(" "):a.text;this.setTranscript(r),this.setSpeakingPeer("[You]"),setTimeout(()=>{this.setTranscript(""),this.setSpeakingPeer("")},5e3),this.broadcast(JSON.stringify({peername:c,transcript:r,isEnabled:this.enabled}))}}catch(a){console.error("transcription",a)}},this.socket.onerror=s=>{console.error("transcription",s),this.socket.close()},this.socket.onclose=s=>{try{console.log(s),this.socket=null,this.enabled&&this.listen()}catch(a){console.error("transcription",a)}},this.socket.onopen=()=>{try{for(let s in this.streams)this.observeStream(this.streams[s].stream)}catch(s){console.error("transcription",s)}}}else console.log("Unable to fetch dynamic token!!")}catch(e){console.error("transcription",e)}})}observeStream(e){return D(this,null,function*(){new(y())(e,j(F({},this.sttTuningConfig),{type:"audio",mimeType:"audio/webm;codecs=pcm",recorderType:f.StereoAudioRecorder,ondataavailable:t=>{const p=new FileReader;p.onload=()=>{const d=p.result;if(this.socket&&this.enabled&&this.socket.readyState&&this.socket.readyState===1)try{this.socket.send(JSON.stringify({audio_data:d.split("base64,")[1]}))}catch(s){console.error("transcription",s)}},p.readAsDataURL(t)}})).startRecording()})}enableTranscription(e){e&&!this.enabled?(this.enabled=!0,this.listen(),this.broadcast(JSON.stringify({transcriptionConfig:{isEnabled:!0}}))):!e&&this.enabled&&(this.broadcast(JSON.stringify({transcriptionConfig:{isEnabled:!1}})),this.enabled=!1,this.socket.close(),this.socket=null,setTimeout(()=>{this.setTranscript("")},200))}}}}]);

//# sourceMappingURL=922.28a5c30f.js.map